{% extends "layout.html" %}
{% from "macros.html" import render_footer %}
{% from "macros.html" import render_app_section with context %}

{%- block sidebar %}
<header>
  {{ render_app_section() }}
</header>
<div class="content">
  <div class="action">
    <button class="btn btn-danger">Nuevo Proveedor</button>
  </div>
  <div class="sidenav">
  </div>
</div>
{%- endblock %}

{%- block content %}

<div class="edit-layout">
  <div class="edit-head">
    <div class="edit-left-panel">
      <div class="edit-row">
        <div class="edit-row-title">
          <div id="avatar"></div>
        </div>
        <div class="edit-row-value">
          <input type="text" name="name" spellcheck="false" class="big noborder autogrow" placeholder="Añade un nombre" />
        </div>
      </div>
    </div>
    <div class="edit-right-panel">
      <div class="edit-row">
        <span>Esto es un espectaculo.</span>
      </div>
    </div>
  </div>

  <div class="edit-body">
    <div class="edit-left-panel">
      <div class="edit-row">
        <div class="edit-row-title">
          <span>Teléfono</span>
        </div>
        <div class="edit-row-value">
          <input type="text" name="phone" spellcheck="false" class="autogrow voidable"/>
        </div>
      </div>
      <div class="edit-row">
        <div class="edit-row-title">
          <span>Email</span>
        </div>
        <div class="edit-row-value">
          <input type="text" name="email" spellcheck="false" class="autogrow voidable"/>
        </div>
      </div>
      <div class="action-row">
        <div class="btn-group">
          <button class="dropdown-toggle" data-toggle="dropdown">Añadir <i class="icon-caret-down"></i></button>
          <ul class="dropdown-menu" role="menu">
            <li><a tabindex="-1" id="add-name">Nombre</a></li>
            <li class="divider"></li>
            <li><a tabindex="-1" id="add-mail">Correo</a></li>
            <li><a tabindex="-1" id="add-phone">Teléfono</a></li>
            <li><a tabindex="-1" id="add-address">Dirección</a></li>
            <li><a tabindex="-1" id="add-custom-field">Personalizado...</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="edit-right-panel">
      <textarea class="note bordered" name="note" spellcheck="false" placeholder="Añade una nota"></textarea>
    </div>
  </div>

</div>

{{ render_footer() }}
{%- endblock %}

{%- block js %}
<script type="text/javascript">  
  $(function() {
    if (typeof Supplier !== 'undefined') {
      var _events = "blur focus load resize scroll unload beforeunload click dblclick mousedown mouseup mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error ready input paste cut";
      $('input').on(_events, function(a, b, c) {
        console.log("input event:", a, b, c);
      });

      var supplier = new Supplier({{ supplier|tojson|safe }});
      var SupplierView = Backbone.View.extend({
        el: $('div#page'),
        _modelBinder: undefined,

        initialize: function() {
          this._modelBinder = new Backbone.ModelBinder();
          this.model.on('change', this.render, this);
        },

        render: function() {
          this._modelBinder.bind(this.model, this.el);
        }
      });

      var supplierView = new SupplierView({model: supplier});
      supplierView.render();

    }
  });
</script>
{%- endblock %}

{# vim: ft=html.jinja:sw=2
#}
